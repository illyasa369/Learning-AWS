# Identity and Access Management
### Users and Groups
- Root account created by default - should not be used or shared.
- Users are individuals within an organization and can be put into groups.
- Groups only contain users, not other groups.
<br>

### Permissions
- Permissions are defined in JSON documents called policies.
- Policies can be applied to users or groups.
- Important to apply the least privilege principle in AWS.
<br>

### Policy Structure

```json
{
  "Version": "2012-10-17",  // Policy language version (standard, almost always this value)

  "Id": "S3-Basic-Permissions",  // Optional identifier or name for the policy

  "Statement": [
    {
      "Sid": "AllowS3Access",  // Optional label for this statement
      
      "Effect": "Allow",  // Allow or Deny

      "Principal": {  // Who the policy applies to (user, role, or AWS account)
        "AWS": "arn:aws:iam::123456789012:root"
      }, 

      "Action": [  // Specific operations allowed or denied
        "s3:GetObject",
        "s3:PutObject"
      ],

      "Resource": "arn:aws:s3:::my-bucket/*" // Target resource (all objects in the S3 bucket)

      /*
      "Condition": {  // Optional rules (example: restrict access by IP)
        "IpAddress": {
          "aws:SourceIp": "203.0.113.0/24"
        }
      }
      */
    }
  ]
}
```
<br>

### Password policy
Stronger passwords = Higher account security

Password policies can include:
- Minimum password lengths.
- Require specific character types.
- Allow IAM users to change their own passwords.
- Password expiration.
- Prevent password re-use.
<br>

### MFA
Combination of a password you know and a security device you own.
MFA device options:
- Virtual MFA (Authenticator app)
- Security key
- Hardware key fob device.
<br>

### Accessing AWS
- Management Console, protected by password + MFA.
- Command Line Interface, protected by access keys.
- Software Developer Kit, protected by access keys.
<br>

### Access Keys
Consists of an Access Key ID + Secret Access Key.
- It is crucial that access keys are never shared.
- If access keys are thought to be compromised, they can be made inactive.
- Best practise to rotate access keys.
<br>

### IAM Roles for Services
IAM Roles give AWS services secure temporary access to other AWS services without hardcoding credentials (access keys).
<br><br>

### IAM security tools
IAM Credentials Report (account-level)
- A report that lists all account users and the status of their various credentials.

IAM Access Advisor (user-level)
- Shows permissions granted to a user and the last time the permissions were used.
- Helps enforce least privilege principle.
<br>

## IAM Guideline and Best Practices
1. Only use root user for AWS account setup.
2. One physical user = One AWS user
3. Assign users to groups and assign permissions to groups.
4. Use a strong password policy.
5. Enforce MFA.
6. Use IAM roles for services.
7. Use access keys for CLI/SDK access.
8. Revise IAM Credentials Report and Access Advisor.
9. Never share IAM users and access keys.
